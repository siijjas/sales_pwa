{"version":3,"file":"DailyLogView-gUYvxD6q.js","sources":["../../../../frontend/src/views/DailyLogView.vue"],"sourcesContent":["<template>\n  <div class=\"bg-gray-50 min-h-screen\">\n    <div class=\"px-4 py-4\">\n      <div class=\"flex items-center gap-3 mb-6\">\n        <button \n          class=\"bg-white p-2 rounded-lg border border-gray-200 shadow-sm\"\n          @click=\"$router.push({ name: 'dashboard' })\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"text-gray-600\"><path d=\"m15 18-6-6 6-6\"/></svg>\n        </button>\n        <h1 class=\"text-xl font-bold text-gray-900\">{{ title }}</h1>\n      </div>\n\n      <div v-if=\"loading\" class=\"space-y-3\">\n        <div v-for=\"i in 3\" :key=\"i\" class=\"h-20 bg-white rounded-xl shadow-sm animate-pulse\" />\n      </div>\n\n      <div v-else>\n        <!-- Payment Summary Card -->\n        <div v-if=\"isPayments && items.length > 0\" class=\"bg-white p-4 rounded-xl shadow-sm border border-gray-100 mb-4\">\n          <div class=\"mb-3\">\n            <p class=\"text-xs text-gray-500 uppercase font-semibold\">Total Collection</p>\n            <p class=\"text-2xl font-bold text-gray-900\">{{ currency }} {{ totalCollection.toLocaleString(undefined, { minimumFractionDigits: 2 }) }}</p>\n          </div>\n          <div class=\"grid grid-cols-2 gap-2\">\n            <div \n              v-for=\"(amount, mode) in collectionBreakdown\" \n              :key=\"mode\"\n              class=\"bg-gray-50 p-2 rounded-lg\"\n            >\n              <p class=\"text-xs text-gray-500 font-medium truncate\">{{ mode }}</p>\n              <p class=\"text-sm font-bold text-gray-900\">{{ currency }} {{ amount.toLocaleString(undefined, { minimumFractionDigits: 2 }) }}</p>\n            </div>\n          </div>\n        </div>\n\n        <div v-if=\"items.length === 0\" class=\"flex flex-col items-center justify-center p-8 bg-white rounded-xl shadow-sm text-center\">\n          <div class=\"w-12 h-12 bg-gray-50 rounded-full flex items-center justify-center mb-3\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"text-gray-400\"><circle cx=\"12\" cy=\"12\" r=\"10\"/><path d=\"m15 9-6 6\"/><path d=\"m9 9 6 6\"/></svg>\n          </div>\n          <p class=\"text-gray-500 font-medium\">No transactions found for today</p>\n        </div>\n\n        <div v-else class=\"space-y-3\">\n          <div\n            v-for=\"item in items\"\n            :key=\"item.name\"\n            class=\"bg-white rounded-xl shadow-sm border border-gray-100 p-4 active:scale-[0.98] transition-transform\"\n            @click=\"openDetail(item)\"\n          >\n            <div class=\"flex justify-between items-start mb-1\">\n              <div>\n                <p class=\"font-semibold text-gray-900\">{{ item.customer_name || item.party_name }}</p>\n                <p class=\"text-xs text-gray-500\">{{ item.name }}</p>\n              </div>\n              <div class=\"flex flex-col items-end gap-1\">\n                <span \n                  class=\"text-xs font-bold px-2 py-1 rounded-full uppercase\"\n                  :class=\"getStatusColor(item.status)\"\n                >\n                  {{ item.status }}\n                </span>\n                <span v-if=\"isPayments && item.mode_of_payment\" class=\"text-[10px] bg-gray-100 text-gray-600 px-1.5 py-0.5 rounded border border-gray-200\">\n                  {{ item.mode_of_payment }}\n                </span>\n              </div>\n            </div>\n            <div class=\"flex justify-between items-end mt-2\">\n              <p class=\"text-xs text-gray-400 font-medium\">{{ formatDate(item.transaction_date || item.posting_date) }}</p>\n              <p class=\"text-sm font-bold text-gray-900\">\n                {{ currency }} {{ (item.grand_total || item.paid_amount || 0).toLocaleString(undefined, { minimumFractionDigits: 2 }) }}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, watch } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { useSessionStore } from '../stores/session';\nimport { getDailyLog } from '../api/frappe';\n\nconst route = useRoute();\nconst router = useRouter();\nconst store = useSessionStore();\nconst currency = computed(() => store.currencyDisplay);\n\nconst type = computed(() => route.params.type as string);\nconst isPayments = computed(() => type.value === 'payments');\nconst title = computed(() => type.value === 'orders' ? \"Today's Orders\" : \"Today's Payments\");\nconst doctype = computed(() => type.value === 'orders' ? 'Sales Order' : 'Payment Entry');\n\nconst items = ref<any[]>([]);\nconst loading = ref(true);\n\nconst totalCollection = computed(() => {\n  if (!isPayments.value) return 0;\n  return items.value.reduce((sum, item) => sum + (item.paid_amount || 0), 0);\n});\n\nconst collectionBreakdown = computed(() => {\n  if (!isPayments.value) return {};\n  return items.value.reduce((acc, item) => {\n    const mode = item.mode_of_payment || 'Unknown';\n    acc[mode] = (acc[mode] || 0) + (item.paid_amount || 0);\n    return acc;\n  }, {} as Record<string, number>);\n});\n\nconst fetchLog = async () => {\n  loading.value = true;\n  items.value = []; // Clear previous items to avoid stale data flash\n  try {\n    items.value = await getDailyLog(doctype.value);\n  } finally {\n    loading.value = false;\n  }\n};\n\nonMounted(() => {\n  fetchLog();\n});\n\nwatch(() => route.params.type, () => {\n  fetchLog();\n});\n\nconst openDetail = (item: any) => {\n  if (type.value === 'orders') {\n    router.push({ name: 'order-detail', params: { name: item.name } });\n  } else {\n    router.push({ name: 'payment-detail', params: { name: item.name } });\n  }\n};\n\nconst getStatusColor = (status: string) => {\n  const colors: Record<string, string> = {\n    Draft: 'bg-gray-100 text-gray-600',\n    Submitted: 'bg-blue-50 text-blue-600',\n    Cancelled: 'bg-red-50 text-red-600',\n    Completed: 'bg-emerald-50 text-emerald-600',\n    Overdue: 'bg-orange-50 text-orange-600',\n    Paid: 'bg-emerald-50 text-emerald-600',\n    Unpaid: 'bg-red-50 text-red-600',\n  };\n  return colors[status] || 'bg-gray-100 text-gray-600';\n};\n\nconst formatDate = (date: string) => {\n  if (!date) return '';\n  return new Date(date).toLocaleDateString();\n};\n</script>\n"],"names":["route","useRoute","router","useRouter","store","useSessionStore","currency","computed","type","isPayments","title","doctype","items","ref","loading","totalCollection","sum","item","collectionBreakdown","acc","mode","fetchLog","__async","getDailyLog","onMounted","watch","openDetail","getStatusColor","status","formatDate","date","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_cache","$event","$router","_hoisted_4","_toDisplayString","_hoisted_5","_Fragment","_renderList","i","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","amount","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23"],"mappings":"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"}